"use strict";(self.webpackChunksrcful_documentation=self.webpackChunksrcful_documentation||[]).push([[2275],{1339:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"developer/zap-for-developers","title":"Zap for Developers","description":"The Zap is Sourceful\'s universal connector for distributed energy resources (DERs). It\'s a protocol-agnostic coordination platform that enables real-time communication between energy devices and the Sourceful Energy Network.","source":"@site/docs/developer/zap-for-developers.md","sourceDirName":"developer","slug":"/developer/zap-for-developers","permalink":"/developer/zap-for-developers","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"slug":"/developer/zap-for-developers"},"sidebar":"docs","previous":{"title":"Energy Management System (EMS)","permalink":"/developer/ems"},"next":{"title":"Design manual and press","permalink":"/developer/design-manual"}}');var s=r(4848),t=r(8453);const l={sidebar_position:5,slug:"/developer/zap-for-developers"},o="Zap for Developers",a={},d=[{value:"What is Zap?",id:"what-is-zap",level:2},{value:"Supported Protocols",id:"supported-protocols",level:2},{value:"Architecture: Local-First Coordination",id:"architecture-local-first-coordination",level:2},{value:"Distributed Deployment",id:"distributed-deployment",level:2},{value:"What Zap Provides Developers",id:"what-zap-provides-developers",level:2},{value:"Access Pattern",id:"access-pattern",level:2},{value:"Data Model Overview",id:"data-model-overview",level:2},{value:"Cadence &amp; Reliability",id:"cadence--reliability",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Migration Context",id:"migration-context",level:2},{value:"Regional Considerations",id:"regional-considerations",level:2},{value:"Legacy Documentation",id:"legacy-documentation",level:2},{value:"Where to Go Next",id:"where-to-go-next",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"zap-for-developers",children:"Zap for Developers"})}),"\n",(0,s.jsx)(n.p,{children:"The Zap is Sourceful's universal connector for distributed energy resources (DERs). It's a protocol-agnostic coordination platform that enables real-time communication between energy devices and the Sourceful Energy Network."}),"\n",(0,s.jsx)(n.h2,{id:"what-is-zap",children:"What is Zap?"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Zap is a universal DER coordinator"})," - not just a P1 meter reader. It's designed to connect, coordinate, and control diverse energy resources through multiple communication protocols."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Hardware Foundation:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"ESP32-C3 chipset architecture"}),"\n",(0,s.jsx)(n.li,{children:"Hardware-agnostic firmware (works on commodity ESP32-C3 boards)"}),"\n",(0,s.jsx)(n.li,{children:"Closed-source firmware optimized for coordination"}),"\n",(0,s.jsx)(n.li,{children:"Low-latency edge computing capabilities"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Design Philosophy:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Local-first coordination"}),": Core control logic runs at the edge, minimizing cloud dependency"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Protocol-agnostic"}),": Speaks the native language of your devices"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Distributed deployment"}),": Multiple Zaps per installation for modular, flexible systems"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"supported-protocols",children:"Supported Protocols"}),"\n",(0,s.jsx)(n.p,{children:"Zap supports multiple communication standards, enabling coordination across diverse DER types:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"P1 Port"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"EU utility meter standard"}),"\n",(0,s.jsx)(n.li,{children:"Smart meter data reading"}),"\n",(0,s.jsx)(n.li,{children:"Real-time energy data"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Modbus-TCP"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Ethernet-based Modbus communication"}),"\n",(0,s.jsx)(n.li,{children:"Common for modern inverters and energy systems"}),"\n",(0,s.jsx)(n.li,{children:"Network-attached DER control"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Modbus-RTU (RS-485)"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Serial communication standard"}),"\n",(0,s.jsx)(n.li,{children:"Widely used in industrial/commercial installations"}),"\n",(0,s.jsx)(n.li,{children:"Direct wired connections to inverters, batteries, etc."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"MQTT"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Lightweight message protocol"}),"\n",(0,s.jsx)(n.li,{children:"IoT device communication"}),"\n",(0,s.jsx)(n.li,{children:"Flexible for various DER types"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Multiple protocols can run simultaneously on a single Zap, enabling complex multi-device coordination."}),"\n",(0,s.jsx)(n.h2,{id:"architecture-local-first-coordination",children:"Architecture: Local-First Coordination"}),"\n",(0,s.jsx)(n.p,{children:"Zap operates on an edge computing model where coordination logic executes locally:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Why Local-First:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Sub-second response times for grid services"}),"\n",(0,s.jsx)(n.li,{children:"Reliable control without internet dependency"}),"\n",(0,s.jsx)(n.li,{children:"Reduced latency for real-time optimization"}),"\n",(0,s.jsx)(n.li,{children:"Better data quality and control precision"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Cloud Role:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Data aggregation and historical storage"}),"\n",(0,s.jsx)(n.li,{children:"Advanced analytics and optimization algorithms"}),"\n",(0,s.jsx)(n.li,{children:"Market integration and grid service coordination"}),"\n",(0,s.jsx)(n.li,{children:"User interfaces (mobile app, web dashboard)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Core coordination continues to function even if cloud connectivity is temporarily lost."}),"\n",(0,s.jsx)(n.h2,{id:"distributed-deployment",children:"Distributed Deployment"}),"\n",(0,s.jsxs)(n.p,{children:["Users often deploy ",(0,s.jsx)(n.strong,{children:"multiple Zaps per installation"})," for modular, flexible systems:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Deployment Scenarios:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Single Zap"}),": P1 meter reading only"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Dual Zap"}),": Meter + Modbus inverter control"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Multi-Zap"}),": Complex installations with multiple DER types"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Each connection point can be a separate Zap, enabling independent protocol handling and easy system expansion."}),"\n",(0,s.jsx)(n.h2,{id:"what-zap-provides-developers",children:"What Zap Provides Developers"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Verified DER telemetry"})," normalized into platform resources (sites, meters, batteries, inverters)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Near-real-time readings"})," and historical access via APIs"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Bidirectional control"})," capabilities (where DER APIs support it)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Price/tariff alignment"})," for forecasting and analytics (see ",(0,s.jsx)(n.a,{href:"/developer/price-api",children:"Price API"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Secure, user-granted access"}),' using "Connect with Sourceful" OAuth-style scopes']}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"access-pattern",children:"Access Pattern"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Obtain a delegated token with ",(0,s.jsx)(n.code,{children:"read:meter"})," (and optionally ",(0,s.jsx)(n.code,{children:"read:tariff"}),", ",(0,s.jsx)(n.code,{children:"read:site"}),")."]}),"\n",(0,s.jsx)(n.li,{children:"Query readings/history for authorized meters and time ranges."}),"\n",(0,s.jsx)(n.li,{children:"Subscribe to change streams or poll for new samples (depending on your integration)."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"data-model-overview",children:"Data Model Overview"}),"\n",(0,s.jsxs)(n.p,{children:["Refer to ",(0,s.jsx)(n.code,{children:"/developer/data-models.md"})," for canonical schemas. Typical reading payloads include:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'{\n  siteId: string,\n  meterId: string,\n  timestamp: string (ISO 8601),\n  measurements: Array<{ key: string, value: number, unit: string }>,\n  source: "zap"\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Notes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Keys are normalized from meter outputs; availability varies by meter model/locale."}),"\n",(0,s.jsxs)(n.li,{children:["Use ",(0,s.jsx)(n.code,{children:"siteId"}),"/",(0,s.jsx)(n.code,{children:"meterId"})," for correlation; do not infer identity from labels."]}),"\n",(0,s.jsx)(n.li,{children:"Units are explicit; do not assume defaults."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"cadence--reliability",children:"Cadence & Reliability"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Cadence: Near real\u2011time; exact sample rate depends on meter capabilities and local standards."}),"\n",(0,s.jsx)(n.li,{children:"Ordering: Treat events as eventually consistent; use timestamps and sequence where provided."}),"\n",(0,s.jsx)(n.li,{children:"Gaps: Handle temporary gaps (connectivity, meter limits). Prefer cumulative counters for reconciliation when available."}),"\n",(0,s.jsxs)(n.li,{children:["Idempotency: Use ",(0,s.jsx)(n.code,{children:"(meterId, timestamp, key)"})," as a stable identity when deduplicating."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Request least\u2011privilege scopes and narrow resources to specific sites/meters."}),"\n",(0,s.jsx)(n.li,{children:"Store and aggregate locally for your UX, but reconcile periodically with historical reads."}),"\n",(0,s.jsx)(n.li,{children:"Treat tariffs/prices as time\u2011varying; always fetch by effective window."}),"\n",(0,s.jsx)(n.li,{children:"Be robust to missing fields; meters differ by market and firmware."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"migration-context",children:"Migration Context"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"From Previous Platforms:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Blixt (Raspberry Pi 4)"}),": Earlier gateway, now migrating to ESP32-C3 for better scalability"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Cloud Gateways"}),": Higher latency, internet-dependent coordination - Zap provides edge intelligence"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Legacy Firmware"}),": Original open-source P1 reader firmware archived at ",(0,s.jsx)(n.a,{href:"https://github.com/srcfl/srcful-zap-firmware",children:"github.com/srcfl/srcful-zap-firmware"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Current Zap firmware is closed-source and optimized for universal coordination across multiple protocols."}),"\n",(0,s.jsx)(n.h2,{id:"regional-considerations",children:"Regional Considerations"}),"\n",(0,s.jsx)(n.p,{children:"Protocol support and deployment patterns vary by region:"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Nordic/Sweden"}),": P1 port standard for utility meters\n",(0,s.jsx)(n.strong,{children:"Germany"}),": Developing V2X infrastructure and specific variants\n",(0,s.jsx)(n.strong,{children:"Australia"}),": RS-485 Modbus common for inverters\n",(0,s.jsx)(n.strong,{children:"Global"}),": Modbus (TCP/RTU) and MQTT widely supported"]}),"\n",(0,s.jsx)(n.p,{children:"The protocol-agnostic approach enables Zap to work anywhere with supported communication standards."}),"\n",(0,s.jsx)(n.h2,{id:"legacy-documentation",children:"Legacy Documentation"}),"\n",(0,s.jsx)(n.p,{children:"For historical reference on the original Sourceful Energy Gateway and legacy P1 reader firmware:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/archive/developer/hardware",children:"Legacy Hardware/Firmware Documentation"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/archive/developer/cloud",children:"Legacy Cloud Integration Documentation"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"These documents describe systems that are no longer actively developed but provide context for the evolution to the current Zap platform."}),"\n",(0,s.jsx)(n.h2,{id:"where-to-go-next",children:"Where to Go Next"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/developer/auth",children:"Authentication & Permissioning"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/developer/data-models",children:"Data Models"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/developer/price-api",children:"Price & Tariffs"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/developer/ems",children:"EMS/Control Integrations"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/developer/API/api-docs",children:"API Documentation"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>o});var i=r(6540);const s={},t=i.createContext(s);function l(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);